<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>å–¶æ¥­ç”¨ã‚¤ãƒ³ã‚¹ã‚¿é‹ç”¨ãƒ‡ãƒ¢</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      background: #f3f4f6;
    }

    .app {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .phone-frame {
      width: 390px;
      max-width: 100%;
      height: 760px;
      max-height: calc(100vh - 32px);
      background: #fff;
      border-radius: 32px;
      box-shadow: 0 24px 60px rgba(15, 23, 42, 0.25);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .phone-header {
      height: 44px;
      padding: 0 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 12px;
      color: #6b7280;
      border-bottom: 1px solid #e5e7eb;
    }

    .phone-content {
      flex: 1;
      padding: 16px;
      overflow-y: auto;
    }

    .step {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .step-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 12px;
      color: #6b7280;
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .field-label {
      font-size: 12px;
      color: #6b7280;
    }

    .input,
    .textarea {
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      font-size: 13px;
    }

    .textarea {
      resize: vertical;
    }

    .input:focus,
    .textarea:focus {
      outline: none;
      border-color: #111827;
    }

    .primary-button,
    .secondary-button {
      padding: 10px 14px;
      border-radius: 999px;
      font-size: 13px;
      border: none;
      cursor: pointer;
    }

    .primary-button {
      background: #111827;
      color: #fff;
    }

    .primary-button:disabled {
      opacity: 0.5;
      cursor: default;
    }

    .secondary-button {
      background: #f3f4f6;
      color: #111827;
    }

    .secondary-button.small {
      padding: 6px 10px;
      font-size: 11px;
    }

    .preview-card {
      border-radius: 16px;
      border: 1px solid #e5e7eb;
      padding: 8px;
      background: #f9fafb;
    }

    .preview-image {
      width: 100%;
      border-radius: 12px;
      object-fit: cover;
    }

    .preview-placeholder {
      height: 160px;
      border-radius: 12px;
      background: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #9ca3af;
      font-size: 13px;
    }

    .file-input {
      font-size: 11px;
      margin-top: 4px;
    }

    .file-helper {
      font-size: 10px;
      color: #9ca3af;
      margin-top: 2px;
    }

    /* æˆ¦ç•¥ã‚«ãƒ¼ãƒ‰ */

    .strategy-card {
      margin-top: 8px;
      border-radius: 16px;
      border: 1px solid #e5e7eb;
      background: linear-gradient(135deg, #f9fafb 0%, #eef2ff 50%, #f9fafb 100%);
      padding: 10px 12px;
      font-size: 11px;
      color: #374151;
    }

    .strategy-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .strategy-chip {
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(17, 24, 39, 0.9);
      color: #f9fafb;
      font-size: 10px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .strategy-store {
      font-size: 11px;
      font-weight: 600;
      color: #111827;
    }

    .strategy-row {
      padding: 4px 0;
      border-top: 1px solid rgba(148, 163, 184, 0.4);
    }

    .strategy-row:first-of-type {
      border-top: none;
    }

    .strategy-row-label {
      font-size: 10px;
      font-weight: 600;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      margin-bottom: 2px;
    }

    .strategy-row-body {
      font-size: 11px;
      line-height: 1.45;
      white-space: pre-wrap;
    }

    .strategy-tagline {
      margin-top: 6px;
      font-size: 10px;
      color: #6b7280;
    }

    /* ãƒ•ã‚£ãƒ¼ãƒ‰éƒ¨åˆ† */

    .feed-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 8px;
    }

    .feed-subtitle {
      font-size: 11px;
      color: #6b7280;
    }

    .feed-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 4px;
      margin-top: 8px;
    }

    .feed-card {
      padding: 0;
      border: none;
      background: transparent;
      cursor: pointer;
    }

    .feed-card-image-wrapper {
      position: relative;
      border-radius: 8px;
      overflow: hidden;
    }

    .feed-card-image {
      width: 100%;
      aspect-ratio: 1 / 1;
      object-fit: cover;
    }

    .feed-card-image.placeholder {
      width: 100%;
      aspect-ratio: 1 / 1;
      background: #e5e7eb;
    }

    .feed-card-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(
        to top,
        rgba(0, 0, 0, 0.55),
        rgba(0, 0, 0, 0.05)
      );
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 4px;
      color: #f9fafb;
      font-size: 9px;
    }

    .feed-card-badge {
      align-self: flex-start;
      padding: 1px 5px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.85);
      font-size: 9px;
    }

    .feed-card-theme {
      font-weight: 600;
      font-size: 9px;
    }

    .feed-card-active .feed-card-image-wrapper {
      outline: 2px solid #111827;
    }

    /* Instagramé¢¨ã‚«ãƒ¼ãƒ‰ */

    .insta-card {
      border-radius: 16px;
      border: 1px solid #e5e7eb;
      overflow: hidden;
      background: #fff;
      margin-top: 12px;
    }

    .insta-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 10px;
    }

    .insta-avatar {
      width: 28px;
      height: 28px;
      border-radius: 999px;
      background: #d1d5db;
    }

    .insta-name {
      font-size: 13px;
      font-weight: 600;
    }

    .insta-sub {
      font-size: 11px;
      color: #9ca3af;
    }

    .insta-image {
      width: 100%;
      max-height: 260px;
      object-fit: cover;
    }

    .insta-image.placeholder {
      width: 100%;
      max-height: 260px;
      background: #e5e7eb;
    }

    .insta-actions {
      display: flex;
      gap: 12px;
      padding: 8px 10px;
      font-size: 16px;
    }

    .insta-caption {
      padding: 0 10px 10px;
      font-size: 12px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="phone-frame">
      <header class="phone-header">
        <span class="phone-time">12:30</span>
        <span class="phone-status">å–¶æ¥­ãƒ‡ãƒ¢</span>
      </header>

      <main class="phone-content">
        <!-- ãƒ•ã‚©ãƒ¼ãƒ ç”»é¢ -->
        <div id="step-form" class="step">
          <h1 class="step-title">å–¶æ¥­ç”¨ãƒ‡ãƒ¢è¨­å®š</h1>
          <p class="subtitle">
            äº‹å‰æƒ…å ± or åº—èˆ—ã§å¾—ãŸæƒ…å ±ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€<br />
            ã€Œå®Ÿéš›ã«é‹ç”¨ã—ãŸã‚‰ã“ã†ãªã‚‹ã€9æŠ•ç¨¿åˆ†ã®ãƒ‡ãƒ¢ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚
          </p>

          <label class="field">
            <span class="field-label">åº—èˆ—å</span>
            <input
              id="storeName"
              class="input"
              value="è•éº¦å±‹ å°–"
              placeholder="ä¾‹ï¼‰è•éº¦å±‹ å°–"
            />
          </label>

          <label class="field">
            <span class="field-label">ã‚«ãƒ†ã‚´ãƒªãƒ¼</span>
            <input
              id="category"
              class="input"
              value="è•éº¦ãƒ»å’Œé£Ÿ"
              placeholder="ä¾‹ï¼‰è•éº¦ãƒ»å’Œé£Ÿ"
            />
          </label>

          <label class="field">
            <span class="field-label">ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ</span>
            <input
              id="target"
              class="input"
              value="20ã€œ30ä»£ã®é£Ÿé€š"
              placeholder="ä¾‹ï¼‰20ã€œ30ä»£ã®é£Ÿé€š"
            />
          </label>

          <label class="field">
            <span class="field-label">ã‚¤ãƒ³ã‚¹ã‚¿é‹ç”¨ã®ç›®çš„</span>
            <input
              id="goal"
              class="input"
              value="æ–°è¦å®¢ã®å¢—åŠ "
              placeholder="ä¾‹ï¼‰æ–°è¦å®¢ã®å¢—åŠ  / å¹³æ—¥å¤œã®é›†å®¢"
            />
          </label>

          <label class="field">
            <span class="field-label">ãŠåº—ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆãƒ»é›°å›²æ°—</span>
            <textarea
              id="concept"
              class="textarea"
              rows="2"
            >é»’åŸºèª¿ã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã§å¤§äººãŒé™ã‹ã«æ¥½ã—ã‚ã‚‹è•éº¦ã‚³ãƒ¼ã‚¹</textarea>
          </label>

          <label class="field">
            <span class="field-label">çœ‹æ¿ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ»ã‚³ãƒ¼ã‚¹å†…å®¹</span>
            <textarea
              id="menuText"
              class="textarea"
              rows="2"
            >é´¨ãã°, å­£ç¯€ã®å¤©ã·ã‚‰, æ—¥æœ¬é…’ãƒšã‚¢ãƒªãƒ³ã‚°</textarea>
          </label>

          <div class="field">
            <span class="field-label">å†™çœŸï¼ˆäº‹å‰ or ãã®å ´ã§æ’®å½±ï¼‰</span>
            <div class="preview-card">
              <img
                id="previewImage"
                class="preview-image"
                style="display: none;"
                alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼"
              />
              <div id="previewPlaceholder" class="preview-placeholder">
                å†™çœŸãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
              </div>
            </div>
            <input
              id="imageInput"
              type="file"
              accept="image/*"
              class="file-input"
              multiple
            />
            <div id="fileHelper" class="file-helper">
              æœ€å¤§9æšã¾ã§é¸æŠã§ãã¾ã™ï¼ˆ1ã€œ9æšï¼‰ã€‚æŠ•ç¨¿ã”ã¨ã«åˆ¥ã®å†™çœŸã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã€‚
            </div>
          </div>

          <button
            id="generateButton"
            class="primary-button"
          >
            ã€Œ9æŠ•ç¨¿ã®ã‚¤ãƒ³ã‚¹ã‚¿é‹ç”¨ã€ã‚’ç”Ÿæˆã™ã‚‹
          </button>
        </div>

        <!-- ãƒ•ã‚£ãƒ¼ãƒ‰ç”»é¢ -->
        <div id="step-feed" class="step" style="display: none;">
          <div class="feed-header">
            <div>
              <h2 id="feedStoreName" class="step-title"></h2>
              <p id="feedSubtitle" class="feed-subtitle"></p>
            </div>
            <button id="backButton" class="secondary-button small">
              æƒ…å ±ã‚’ä¿®æ­£ã™ã‚‹
            </button>
          </div>

          <p class="subtitle">
            ã¾ãšã€ã“ã®åº—èˆ—ã«åˆã‚ã›ãŸ<strong>ã‚¤ãƒ³ã‚¹ã‚¿é‹ç”¨ã®ãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥</strong>ã‚’1æšã«ã¾ã¨ã‚ã¾ã™ã€‚<br />
            ãã®ã†ãˆã§ã€ä¸‹ã«9æŠ•ç¨¿åˆ†ã®å…·ä½“çš„ãªæŠ•ç¨¿ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä¸¦ã¹ã¦ã„ã¾ã™ã€‚
          </p>

          <!-- æˆ¦ç•¥ã‚µãƒãƒªã‚«ãƒ¼ãƒ‰ -->
          <div id="strategyCard" class="strategy-card" style="display: none;">
            <div class="strategy-header">
              <div class="strategy-chip">Brand Strategy</div>
              <div id="strategyStore" class="strategy-store"></div>
            </div>

            <div class="strategy-row">
              <div class="strategy-row-label">ãƒ–ãƒ©ãƒ³ãƒ‰å…¨ä½“åƒ</div>
              <div id="strategyOverview" class="strategy-row-body"></div>
            </div>

            <div class="strategy-row">
              <div class="strategy-row-label">ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¤ãƒ³ã‚µã‚¤ãƒˆ</div>
              <div id="strategyTarget" class="strategy-row-body"></div>
            </div>

            <div class="strategy-row">
              <div class="strategy-row-label">åº—èˆ—ã®å¼·ã¿</div>
              <div id="strategyStrength" class="strategy-row-body"></div>
            </div>

            <div class="strategy-row">
              <div class="strategy-row-label">ã‚³ã‚¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</div>
              <div id="strategyMessage" class="strategy-row-body"></div>
            </div>

            <div class="strategy-row">
              <div class="strategy-row-label">é‹ç”¨ç›®çš„</div>
              <div id="strategyObjective" class="strategy-row-body"></div>
            </div>

            <div class="strategy-row">
              <div class="strategy-row-label">æŠ•ç¨¿æ–¹é‡</div>
              <div id="strategyContent" class="strategy-row-body"></div>
            </div>

            <div class="strategy-row">
              <div class="strategy-row-label">ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¬ã‚¤ãƒ‰</div>
              <div id="strategyVisual" class="strategy-row-body"></div>
            </div>

            <div class="strategy-tagline">
              â€» å®Ÿéš›ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã€ã“ã®æ–¹é‡ã«æ²¿ã£ã¦æ¯æœˆã®æŠ•ç¨¿æ¡ˆãƒ»æ’®å½±æŒ‡ç¤ºãƒ»ç”»åƒåŠ å·¥ãƒ«ãƒ¼ãƒ«ã¾ã§è‡ªå‹•ã§è¨­è¨ˆã—ã¾ã™ã€‚
            </div>
          </div>

          <!-- 9æŠ•ç¨¿ã‚°ãƒªãƒƒãƒ‰ -->
          <div id="feedGrid" class="feed-grid"></div>

          <!-- Instagramé¢¨ã‚«ãƒ¼ãƒ‰ -->
          <div id="instaCard" class="insta-card" style="display: none;">
            <div class="insta-header">
              <div class="insta-avatar"></div>
              <div>
                <div id="instaName" class="insta-name"></div>
                <div id="instaSub" class="insta-sub"></div>
              </div>
            </div>

            <img
              id="instaImage"
              class="insta-image"
              style="display: none;"
              alt="æŠ•ç¨¿ç”»åƒ"
            />
            <div
              id="instaImagePlaceholder"
              class="insta-image placeholder"
              style="display: none;"
            ></div>

            <div class="insta-actions">
              <span>â™¡</span>
              <span>ğŸ’¬</span>
              <span>ğŸ“¤</span>
            </div>

            <div id="instaCaption" class="insta-caption"></div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <script>
    // ç”»åƒã¯è¤‡æ•°ï¼ˆæœ€å¤§9æšï¼‰ä¿æŒã™ã‚‹
    let currentImageUrls = [];
    let currentPosts = [];
    let selectedIndex = 0;
    let currentStrategy = null;

    const stepForm = document.getElementById('step-form');
    const stepFeed = document.getElementById('step-feed');

    const storeNameInput = document.getElementById('storeName');
    const categoryInput = document.getElementById('category');
    const targetInput = document.getElementById('target');
    const goalInput = document.getElementById('goal');
    const conceptInput = document.getElementById('concept');
    const menuTextInput = document.getElementById('menuText');

    const imageInput = document.getElementById('imageInput');
    const previewImage = document.getElementById('previewImage');
    const previewPlaceholder = document.getElementById('previewPlaceholder');
    const fileHelper = document.getElementById('fileHelper');

    const generateButton = document.getElementById('generateButton');
    const backButton = document.getElementById('backButton');

    const feedStoreName = document.getElementById('feedStoreName');
    const feedSubtitle = document.getElementById('feedSubtitle');
    const feedGrid = document.getElementById('feedGrid');

    const strategyCard = document.getElementById('strategyCard');
    const strategyStore = document.getElementById('strategyStore');
    const strategyOverview = document.getElementById('strategyOverview');
    const strategyTarget = document.getElementById('strategyTarget');
    const strategyStrength = document.getElementById('strategyStrength');
    const strategyMessage = document.getElementById('strategyMessage');
    const strategyObjective = document.getElementById('strategyObjective');
    const strategyContent = document.getElementById('strategyContent');
    const strategyVisual = document.getElementById('strategyVisual');

    const instaCard = document.getElementById('instaCard');
    const instaName = document.getElementById('instaName');
    const instaSub = document.getElementById('instaSub');
    const instaImage = document.getElementById('instaImage');
    const instaImagePlaceholder = document.getElementById('instaImagePlaceholder');
    const instaCaption = document.getElementById('instaCaption');

    // è¤‡æ•°æšç”»åƒé¸æŠ
    imageInput.addEventListener('change', function (e) {
      const files = Array.from(e.target.files || []);
      if (!files.length) {
        currentImageUrls = [];
        previewImage.style.display = 'none';
        previewPlaceholder.style.display = 'flex';
        fileHelper.textContent =
          'æœ€å¤§9æšã¾ã§é¸æŠã§ãã¾ã™ï¼ˆ1ã€œ9æšï¼‰ã€‚æŠ•ç¨¿ã”ã¨ã«åˆ¥ã®å†™çœŸã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã€‚';
        return;
      }

      const limitedFiles = files.slice(0, 9);
      currentImageUrls = limitedFiles.map(function (file) {
        return URL.createObjectURL(file);
      });

      previewImage.src = currentImageUrls[0];
      previewImage.style.display = 'block';
      previewPlaceholder.style.display = 'none';

      fileHelper.textContent =
        currentImageUrls.length +
        'æšã®å†™çœŸã‚’é¸æŠä¸­ï¼ˆ9æŠ•ç¨¿ã«é †ç•ªã«å‰²ã‚Šå½“ã¦ã¾ã™ã€‚è¶³ã‚Šãªã„åˆ†ã¯1æšç›®ã‚’ä½¿ç”¨ï¼‰ã€‚';
    });

    generateButton.addEventListener('click', function () {
      generateButton.disabled = true;
      generateButton.textContent = '9æŠ•ç¨¿ã®ãƒ‡ãƒ¢ã‚’ç”Ÿæˆä¸­â€¦';

      const storeName = storeNameInput.value || 'æœ¬æ—¥ã®ãŠåº—';
      const category = categoryInput.value || 'é£²é£Ÿåº—';
      const target = targetInput.value || 'æƒ³å®šã—ã¦ã„ã‚‹ãŠå®¢æ§˜';
      const goal = goalInput.value || 'æ¥åº—æ•°ã®å¢—åŠ ';
      const concept = conceptInput.value || 'ãŠåº—ã®ä¸–ç•Œè¦³';
      const menuText = menuTextInput.value || '';

      currentStrategy = generateStrategy({
        storeName,
        category,
        target,
        goal,
        concept,
        menuText,
      });

      currentPosts = generateNinePosts({
        storeName,
        category,
        target,
        goal,
        concept,
        menuText,
      });
      selectedIndex = 0;

      setTimeout(function () {
        feedStoreName.textContent = storeName;
        feedSubtitle.textContent =
          category + ' | ææ¡ˆã‚¤ãƒ¡ãƒ¼ã‚¸ï¼šãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥ + 9æŠ•ç¨¿ã®ã‚¤ãƒ³ã‚¹ã‚¿é‹ç”¨';

        // æˆ¦ç•¥ã‚µãƒãƒªã‚«ãƒ¼ãƒ‰åæ˜ 
        if (currentStrategy) {
          strategyStore.textContent = storeName;
          strategyOverview.textContent = currentStrategy.overview;
          strategyTarget.textContent = currentStrategy.targetInsight;
          strategyStrength.textContent = currentStrategy.strength;
          strategyMessage.textContent = currentStrategy.coreMessage;
          strategyObjective.textContent = currentStrategy.objective;
          strategyContent.textContent = currentStrategy.contentStrategy;
          strategyVisual.textContent = currentStrategy.visualGuide;
          strategyCard.style.display = 'block';
        } else {
          strategyCard.style.display = 'none';
        }

        renderFeedGrid();
        renderInstaCard();

        stepForm.style.display = 'none';
        stepFeed.style.display = 'flex';

        generateButton.disabled = false;
        generateButton.textContent = 'ã€Œ9æŠ•ç¨¿ã®ã‚¤ãƒ³ã‚¹ã‚¿é‹ç”¨ã€ã‚’ç”Ÿæˆã™ã‚‹';
      }, 600);
    });

    backButton.addEventListener('click', function () {
      stepFeed.style.display = 'none';
      stepForm.style.display = 'flex';
    });

    function renderFeedGrid() {
      feedGrid.innerHTML = '';

      currentPosts.forEach(function (post, index) {
        const button = document.createElement('button');
        button.type = 'button';
        button.className =
          'feed-card' + (index === selectedIndex ? ' feed-card-active' : '');

        const wrapper = document.createElement('div');
        wrapper.className = 'feed-card-image-wrapper';

        let img;
        const imgUrl =
          currentImageUrls[index] || currentImageUrls[0] || null;

        if (imgUrl) {
          img = document.createElement('img');
          img.src = imgUrl;
          img.alt = post.theme;
          img.className = 'feed-card-image';
        } else {
          img = document.createElement('div');
          img.className = 'feed-card-image placeholder';
        }

        const overlay = document.createElement('div');
        overlay.className = 'feed-card-overlay';

        const badge = document.createElement('span');
        badge.className = 'feed-card-badge';
        badge.textContent = index + 1;

        const theme = document.createElement('span');
        theme.className = 'feed-card-theme';
        theme.textContent = post.theme;

        overlay.appendChild(badge);
        overlay.appendChild(theme);
        wrapper.appendChild(img);
        wrapper.appendChild(overlay);
        button.appendChild(wrapper);

        button.addEventListener('click', function () {
          selectedIndex = index;
          renderFeedGrid();
          renderInstaCard();
        });

        feedGrid.appendChild(button);
      });
    }

    function renderInstaCard() {
      const storeName = storeNameInput.value || 'æœ¬æ—¥ã®ãŠåº—';
      const post = currentPosts[selectedIndex];
      if (!post) {
        instaCard.style.display = 'none';
        return;
      }

      instaCard.style.display = 'block';
      instaName.textContent = storeName;
      instaSub.textContent = '@' + storeName.replace(/\s/g, '');

      const imgUrl =
        currentImageUrls[selectedIndex] || currentImageUrls[0] || null;

      if (imgUrl) {
        instaImage.src = imgUrl;
        instaImage.style.display = 'block';
        instaImagePlaceholder.style.display = 'none';
      } else {
        instaImage.style.display = 'none';
        instaImagePlaceholder.style.display = 'block';
      }

      instaCaption.textContent = storeName + ' ' + post.caption;
    }

    // 7ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆï¼ˆAIãªã—ç‰ˆãƒ­ã‚¸ãƒƒã‚¯ï¼‰
    function generateStrategy(params) {
      const storeName = params.storeName || 'æœ¬æ—¥ã®ãŠåº—';
      const category = params.category || 'é£²é£Ÿåº—';
      const target = params.target || 'æƒ³å®šã—ã¦ã„ã‚‹ãŠå®¢æ§˜';
      const goal = params.goal || 'æ¥åº—æ•°ã®å¢—åŠ ';
      const concept = params.concept || 'ãŠåº—ã®ä¸–ç•Œè¦³';
      const menuText = params.menuText || '';

      const menus = menuText
        .split(',')
        .map(function (m) {
          return m.trim();
        })
        .filter(function (m) {
          return m.length > 0;
        });

      const mainMenu = menus[0] || 'çœ‹æ¿ãƒ¡ãƒ‹ãƒ¥ãƒ¼';
      const secondMenu = menus[1] || 'å­£ç¯€ãƒ¡ãƒ‹ãƒ¥ãƒ¼';
      const hasCourse = menus.length > 2;

      const overview =
        category +
        'ã¨ã—ã¦ã€' +
        storeName +
        'ã¯ã€Œ' +
        concept +
        'ã€ã‚’è»¸ã«ã€æ—¥å¸¸ã‚ˆã‚Šå°‘ã—ç‰¹åˆ¥ãªæ™‚é–“ã‚’æä¾›ã™ã‚‹ãƒ–ãƒ©ãƒ³ãƒ‰ã¨ã—ã¦è¨­è¨ˆã—ã¾ã™ã€‚' +
        'ç«¶åˆã®ä¸€èˆ¬çš„ãª' +
        category +
        'ã¨æ¯”ã¹ã¦ã€ã€Œ' +
        mainMenu +
        'ã€ã‚„ç©ºé–“æ¼”å‡ºã‚’é€šã˜ãŸä½“é¨“ä¾¡å€¤ã‚’å¼·ãæ‰“ã¡å‡ºã—ã¦ã„ãã¾ã™ã€‚';

      const targetInsight =
        target +
        'ã¯ã€ä¾¡æ ¼ã ã‘ã§ãªãã€Œä½“é¨“ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã€ã‚„ã€Œä¸–ç•Œè¦³ã€ã«ä¾¡å€¤ã‚’æ„Ÿã˜ã‚‹å±¤ã§ã™ã€‚' +
        'æ¥åº—å‰ã«Instagramã§åº—å†…ã®é›°å›²æ°—ã‚„æ–™ç†ã®ã“ã ã‚ã‚Šã‚’ç¢ºèªã™ã‚‹è¡Œå‹•ãŒå¤šã„ãŸã‚ã€' +
        'å†™çœŸã¨ãƒ†ã‚­ã‚¹ãƒˆã®ä¸¡æ–¹ã§ä¸–ç•Œè¦³ã‚’ä¸å¯§ã«ä¼ãˆã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚';

      const strength =
        'ãƒ»' +
        mainMenu +
        'ã‚’ä¸­å¿ƒã¨ã—ãŸæ–™ç†ã‚¯ã‚ªãƒªãƒ†ã‚£\n' +
        (secondMenu
          ? 'ãƒ»' + secondMenu + ' ãªã©ã€å­£ç¯€æ„Ÿã®ã‚ã‚‹ä¸€çš¿\n'
          : '') +
        (hasCourse
          ? 'ãƒ»ã‚³ãƒ¼ã‚¹å…¨ä½“ã§ç‰©èªæ€§ã®ã‚ã‚‹ä½“é¨“è¨­è¨ˆ\n'
          : '') +
        'ãƒ»' +
        concept +
        ' ã¨ã„ã†ç©ºé–“ãƒ‡ã‚¶ã‚¤ãƒ³\n' +
        'ãƒ»è·äººã®æ‰‹ä»•äº‹ã‚„æ—¥æœ¬é…’ãƒšã‚¢ãƒªãƒ³ã‚°ãªã©ã€ã‚¹ãƒˆãƒ¼ãƒªãƒ¼æ€§ã®é«˜ã„è¦ç´ ';

      const coreMessage =
        'ã€Œ' +
        concept +
        'ã€ã‚’ä¸€æ™©ã‚’é€šã—ã¦å‘³ã‚ãˆã‚‹ã€' +
        mainMenu +
        'ä¸­å¿ƒã®' +
        category +
        'ä½“é¨“ã€‚' +
        'æ—¥å¸¸ã®å»¶é•·ã§ã¯ãªãã€â€œå°‘ã—ã ã‘ç‰¹åˆ¥ãªå¤œâ€ã‚’éã”ã—ãŸã„äººã®ãŸã‚ã®ä¸€è»’ã€‚';

      const objective =
        'çŸ­æœŸï¼š' +
        target +
        'ã®ä¸­ã§ã®èªçŸ¥ç²å¾—ã¨ã€Œè¡Œã£ã¦ã¿ãŸã„åº—ãƒªã‚¹ãƒˆã€å…¥ã‚Š\n' +
        'ä¸­æœŸï¼šInstagramçµŒç”±ã®äºˆç´„ãƒ»å•ã„åˆã‚ã›å¢—åŠ ã«ã‚ˆã‚‹ ' +
        goal +
        '\n' +
        'é•·æœŸï¼šã‚¹ãƒˆãƒ¼ãƒªãƒ¼ç™ºä¿¡ã‚’é€šã˜ãŸãƒ–ãƒ©ãƒ³ãƒ‰ãƒ•ã‚¡ãƒ³åŒ–ï¼ˆæ¥åº—é »åº¦ãƒ»å®¢å˜ä¾¡ã®å‘ä¸Šï¼‰';

      const contentStrategy =
        'ãƒ»çœ‹æ¿ãƒ¡ãƒ‹ãƒ¥ãƒ¼æŠ•ç¨¿ã§ã€Œã“ã®åº—ã¨ã„ãˆã°ã“ã‚Œã€ã‚’å›ºå®šåŒ–\n' +
        'ãƒ»åº—å†…ãƒ»ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãƒ»ç››ã‚Šä»˜ã‘ãªã©ã€ç©ºé–“ã¨ä½“é¨“ãŒä¼ã‚ã‚‹å†™çœŸã‚’å®šæœŸçš„ã«ç™ºä¿¡\n' +
        'ãƒ»' +
        (secondMenu || 'å­£ç¯€ãƒ¡ãƒ‹ãƒ¥ãƒ¼') +
        'ã§å­£ç¯€æ„Ÿã¨ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ç†ç”±ã‚’ä½œã‚‹\n' +
        'ãƒ»è·äººã®æ‰€ä½œã‚„ä»•è¾¼ã¿é¢¨æ™¯ã§ã€ä¾¡æ ¼ä»¥ä¸Šã®ä¾¡å€¤ã‚’æ„Ÿã˜ã¦ã‚‚ã‚‰ã†\n' +
        'ãƒ»äºˆç´„æ–¹æ³•ãƒ»ã‚¢ã‚¯ã‚»ã‚¹æŠ•ç¨¿ã§ã€Œæ°—ã«ãªã£ãŸç¬é–“ã€ã«è¡Œå‹•ã§ãã‚‹å°ç·šã‚’ç”¨æ„ã™ã‚‹';

      const visualGuide =
        'ãƒ»ãƒ–ãƒ©ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼ï¼šé»’ Ã— æœ¨ç›® Ã— æš–è‰²ç³»ã®ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°\n' +
        'ãƒ»ãƒˆãƒ¼ãƒ³ï¼šè½ã¡ç€ããƒ»ä½™ç™½ãƒ»è·äººæ€§ã€‚éåº¦ãªãƒãƒƒãƒ—ã•ã¯é¿ã‘ã‚‹\n' +
        'ãƒ»å†™çœŸï¼šã‚³ãƒ¼ã‚¹ã®æµã‚ŒãŒä¼ã‚ã‚‹å¼•ãã®ã‚«ãƒƒãƒˆã¨ã€æ¹¯æ°—ã‚„è³ªæ„ŸãŒä¼ã‚ã‚‹å¯„ã‚Šã®ã‚«ãƒƒãƒˆã‚’æ··åœ¨ã•ã›ã‚‹\n' +
        'ãƒ»æ§‹å›³ï¼šã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¶Šã—ã®æ–œã‚45Â°ã‚„çœŸä¸Šã‹ã‚‰ã®ãƒ•ãƒ©ãƒƒãƒˆãƒ¬ã‚¤ã‚’åŸºèª¿ã«çµ±ä¸€\n' +
        'ãƒ»ãƒ†ã‚­ã‚¹ãƒˆï¼šç”»åƒå†…ã®æ–‡å­—ã¯æœ€å°é™ã«ã€ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ã§ç‰©èªã‚’è£œå®Œ';

      return {
        overview,
        targetInsight,
        strength,
        coreMessage,
        objective,
        contentStrategy,
        visualGuide,
      };
    }

    // 9æŠ•ç¨¿åˆ†ã®ãƒ†ã‚­ã‚¹ãƒˆæ§‹æˆãƒ­ã‚¸ãƒƒã‚¯
    function generateNinePosts(params) {
      const storeName = params.storeName || 'æœ¬æ—¥ã®ãŠåº—';
      const category = params.category || '';
      const target = params.target || '';
      const goal = params.goal || '';
      const concept = params.concept || '';
      const menuText = params.menuText || '';

      const menus = menuText
        .split(',')
        .map(function (m) {
          return m.trim();
        })
        .filter(function (m) {
          return m.length > 0;
        });

      const mainMenu = menus[0] || 'çœ‹æ¿ãƒ¡ãƒ‹ãƒ¥ãƒ¼';
      const secondMenu = menus[1] || 'å­£ç¯€ãƒ¡ãƒ‹ãƒ¥ãƒ¼';
      const thirdMenu = menus[2] || 'ãŠã™ã™ã‚ã®ä¸€å“';

      const baseHashtags = [
        '#' + storeName.replace(/\s/g, ''),
        category ? '#' + category.replace(/\s/g, '') : '',
        '#ã‚°ãƒ«ãƒ¡',
        '#é£Ÿã¹æ­©ã',
      ].filter(Boolean);

      const tagLine = baseHashtags.join(' ');

      return [
        {
          id: 1,
          theme: 'çœ‹æ¿ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç´¹ä»‹',
          caption:
            'ã¾ãšã¯' +
            storeName +
            'ã®é¡”ã¨ã‚‚ã„ãˆã‚‹ä¸€çš¿ã€' +
            mainMenu +
            'ã‹ã‚‰ã€‚\n' +
            concept +
            '\n\n' +
            target +
            'ã®ãŠå®¢æ§˜ã«å‘ã‘ã¦ã€' +
            goal +
            'ã‚’æ„è­˜ã—ãŸæŠ•ç¨¿ã§ã™ã€‚\n\n' +
            tagLine,
        },
        {
          id: 2,
          theme: 'åº—å†…ã®é›°å›²æ°—ç´¹ä»‹',
          caption:
            storeName +
            'ã®é­…åŠ›ã¯æ–™ç†ã ã‘ã§ã¯ãªãã€' +
            concept +
            ' ã¨ã„ã†ç©ºé–“ãã®ã‚‚ã®ã€‚\n' +
            'ã€Œä»Šæ—¥ã¯å°‘ã—ã ã‘ç‰¹åˆ¥ãªå¤œã«ã—ãŸã„ã€ãã‚“ãª' +
            target +
            'ã«ãŠã™ã™ã‚ã®ä¸€å¸­ã§ã™ã€‚\n\n' +
            goal +
            'ã«ã¤ãªãŒã‚‹ã€ä¸–ç•Œè¦³è¨´æ±‚å‹ã®ä¸€æšã¨ã—ã¦æŠ•ç¨¿ã—ã¾ã™ã€‚\n\n' +
            tagLine,
        },
        {
          id: 3,
          theme: 'å­£ç¯€ã®ãŠã™ã™ã‚',
          caption:
            'ãã®æ™‚ã€…ã®æ—¬ã‚’å–ã‚Šå…¥ã‚ŒãŸã€å­£ç¯€é™å®šã®ãŠã™ã™ã‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚‚ã”ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚\n' +
            secondMenu +
            ' ãªã©ã€æ™‚æœŸã«ã‚ˆã£ã¦å†…å®¹ãŒå¤‰ã‚ã‚‹ãŸã‚ã€ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦æœ€æ–°æƒ…å ±ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ãŸã ããŸã„æŠ•ç¨¿ã§ã™ã€‚\n\n' +
            goal +
            'ã«å‘ã‘ã¦ã€ãƒªãƒ”ãƒ¼ãƒˆã®ãã£ã‹ã‘ã‚’ä½œã‚‹ãƒã‚¸ã‚·ãƒ§ãƒ³ã®æŠ•ç¨¿ã§ã™ã€‚\n\n' +
            tagLine,
        },
        {
          id: 4,
          theme: 'ã‚³ãƒ¼ã‚¹å…¨ä½“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸',
          caption:
            storeName +
            'ã§ã¯ã€' +
            (menus.length ? menus.join('ãƒ»') : 'ã‚³ãƒ¼ã‚¹ä»•ç«‹ã¦') +
            ' ã§ä¸€æ™©ã‚’é€šã—ã¦æ¥½ã—ã‚“ã§ã„ãŸã ã‘ã¾ã™ã€‚\n' +
            'å†™çœŸã§ã¯ä¼ãˆãã‚Œãªã„æµã‚Œã‚„ä½™éŸ»ã‚’ã€ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ã§ä¸å¯§ã«è£œå®Œã™ã‚‹æ§‹æˆã§ã™ã€‚\n\n' +
            'ä¾¡æ ¼ã‚„ã‚³ãƒ¼ã‚¹å†…å®¹ã®æ¦‚è¦ã‚’è¼‰ã›ã‚‹ã“ã¨ã§ã€' +
            goal +
            'ã«ç›´çµã™ã‚‹ã€Œæ¥åº—ã‚¤ãƒ¡ãƒ¼ã‚¸ã€ã‚’æŒã£ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚\n\n' +
            tagLine,
        },
        {
          id: 5,
          theme: 'ã‚·ã‚§ãƒ•ãƒ»è·äººã®ã“ã ã‚ã‚Š',
          caption:
            'ä¸€çš¿ä¸€çš¿ã«è¾¼ã‚ãŸæƒ³ã„ã‚„ã€ç´ æã®é¸ã³æ–¹ãªã©ã€' +
            storeName +
            'ãªã‚‰ã§ã¯ã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚\n' +
            'ã‚ªãƒ¼ãƒŠãƒ¼ã‚„ã‚·ã‚§ãƒ•ã®æ¨ªé¡”ãŒä¼ã‚ã‚‹ã“ã¨ã§ã€' +
            target +
            'ã®å…±æ„Ÿã‚’ç”Ÿã¿ã€ä¾¡æ ¼ä»¥ä¸Šã®ä¾¡å€¤ã‚’æ„Ÿã˜ã¦ã‚‚ã‚‰ã†ç‹™ã„ã§ã™ã€‚\n\n' +
            tagLine,
        },
        {
          id: 6,
          theme: 'æ—¥æœ¬é…’ãƒ»ãƒ‰ãƒªãƒ³ã‚¯ãƒšã‚¢ãƒªãƒ³ã‚°',
          caption:
            thirdMenu +
            ' ã«åˆã‚ã›ã¦ã€æ—¥æœ¬é…’ã‚„ãƒ‰ãƒªãƒ³ã‚¯ã®ãƒšã‚¢ãƒªãƒ³ã‚°ææ¡ˆã‚‚è¡Œã£ã¦ã„ã¾ã™ã€‚\n' +
            'æ–™ç†ã¨ãŠé…’ã®çµ„ã¿åˆã‚ã›ã¾ã§ææ¡ˆã™ã‚‹ã“ã¨ã§ã€ã€Œã“ã“ã«æ¥ã‚Œã°é–“é•ã„ãªã„ã€ã¨æ€ã£ã¦ã‚‚ã‚‰ã†æŠ•ç¨¿ã§ã™ã€‚\n\n' +
            goal +
            'ã®ä¸­ã§ã‚‚ã€å˜ä¾¡ã‚¢ãƒƒãƒ—ã‚„ç‰¹åˆ¥ãªæ—¥ã®åˆ©ç”¨å¢—åŠ ã«å¯„ä¸ã™ã‚‹ãƒã‚¸ã‚·ãƒ§ãƒ³ã§ã™ã€‚\n\n' +
            tagLine,
        },
        {
          id: 7,
          theme: 'åˆ©ç”¨ã‚·ãƒ¼ãƒ³ã®ææ¡ˆ',
          caption:
            'è¨˜å¿µæ—¥ã‚„ã¡ã‚‡ã£ã¨è´…æ²¢ã‚’ã—ãŸã„æ—¥ã€ä»•äº‹çµ‚ã‚ã‚Šã®ã”è¤’ç¾ãªã©ã€' +
            storeName +
            'ã®ãŠã™ã™ã‚åˆ©ç”¨ã‚·ãƒ¼ãƒ³ã‚’ã”ææ¡ˆã—ã¾ã™ã€‚\n' +
            target +
            'ãŒã€Œè‡ªåˆ†ã”ã¨ã€ã¨ã—ã¦æƒ³åƒã—ã‚„ã™ã„ã‚ˆã†ãªã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å…·ä½“çš„ã«æãã¾ã™ã€‚\n\n' +
            tagLine,
        },
        {
          id: 8,
          theme: 'äºˆç´„æ–¹æ³•ãƒ»ã‚¢ã‚¯ã‚»ã‚¹æ¡ˆå†…',
          caption:
            goal +
            'ã‚’é”æˆã™ã‚‹ã†ãˆã§æ¬ ã‹ã›ãªã„ã€äºˆç´„å°ç·šã‚„ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±ã‚‚ã—ã£ã‹ã‚Šç™ºä¿¡ã—ã¾ã™ã€‚\n' +
            'å–¶æ¥­æ™‚é–“ã‚„æœ€å¯„ã‚Šé§…ã€äºˆç´„ãƒªãƒ³ã‚¯ãªã©ã‚’ã¾ã¨ã‚ã¦ãŠãã“ã¨ã§ã€ã€Œæ°—ã«ãªã£ãŸç¬é–“ã€ã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã—ã¦ã‚‚ã‚‰ãˆã‚‹æŠ•ç¨¿ã§ã™ã€‚\n\n' +
            tagLine,
        },
        {
          id: 9,
          theme: 'æœ€å¾Œã®ä¸€æŠ¼ã—ãƒ»ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸',
          caption:
            storeName +
            'ãŒå¤§äº‹ã«ã—ã¦ã„ã‚‹ä¾¡å€¤è¦³ã‚„ã€ãƒ–ãƒ©ãƒ³ãƒ‰ã¨ã—ã¦ç›®æŒ‡ã—ã¦ã„ã‚‹å§¿ã‚’ã€è¨€è‘‰ã«ã—ã¦å±Šã‘ã‚‹æŠ•ç¨¿ã§ã™ã€‚\n' +
            concept +
            '\n\nãƒ•ã‚£ãƒ¼ãƒ‰å…¨ä½“ã‚’ç· ã‚ããã‚‹ã€Œãƒ–ãƒ©ãƒ³ãƒ‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã¨ã—ã¦ã€' +
            target +
            'ã«é•·æœŸçš„ãªãƒ•ã‚¡ãƒ³ã«ãªã£ã¦ã„ãŸã ãã“ã¨ã‚’ç‹™ã„ã¾ã™ã€‚\n\n' +
            tagLine,
        },
      ];
    }
  </script>
</body>
</html>
